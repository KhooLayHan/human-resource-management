<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import org.kordamp.ikonli.javafx.*?>

<ScrollPane fitToWidth="true"
            styleClass="dashboard-scroll-pane"
            xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="org.bhel.hrm.client.controllers.LeaveController">

    <VBox spacing="25">
        <padding>
            <Insets top="20" right="20" bottom="20" left="20"/>
        </padding>

        <!-- Header -->
        <VBox spacing="5">
            <Label text="Leave Management" styleClass="page-title"/>
            <Label fx:id="statusLabel" text="" styleClass="mini-stat"/>
        </VBox>

        <GridPane hgap="20" vgap="20">
            <columnConstraints>
                <ColumnConstraints percentWidth="40" hgrow="ALWAYS"/>
                <ColumnConstraints percentWidth="60" hgrow="ALWAYS"/>
            </columnConstraints>

            <!-- Apply for Leave (Form Card) -->
            <VBox styleClass="chart-card"
                  GridPane.rowIndex="0" GridPane.columnIndex="0">

                <Label text="Apply for Leave" styleClass="section-title">
                    <graphic>
                        <FontIcon iconLiteral="mdi2c-calendar-plus"
                                  iconSize="18"
                                  iconColor="#7f8c8d"/>
                    </graphic>
                </Label>

                <VBox spacing="12" styleClass="vbox-padding">

                    <GridPane hgap="12" vgap="10">
                        <columnConstraints>
                            <ColumnConstraints minWidth="110"/>
                            <ColumnConstraints hgrow="ALWAYS"/>
                        </columnConstraints>

                        <Label text="Start Date:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <DatePicker fx:id="startDatePicker" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                        <Label text="End Date:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        <DatePicker fx:id="endDatePicker" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                        <Label text="Leave Type:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                        <ComboBox fx:id="leaveTypeCombo" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                        <Label text="Reason:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                        <TextField fx:id="reasonField"
                                   promptText="Optional short reason"
                                   GridPane.rowIndex="3" GridPane.columnIndex="1"/>
                    </GridPane>

                    <HBox spacing="10">
                        <Button fx:id="applyButton"
                                text="Submit Application"
                                maxWidth="Infinity"
                                HBox.hgrow="ALWAYS"
                                styleClass="button-secondary">
                            <graphic>
                                <FontIcon iconLiteral="mdi2s-send"
                                          iconSize="16"/>
                            </graphic>
                        </Button>

                        <Button fx:id="refreshButton"
                                text="Refresh"
                                maxWidth="Infinity"
                                HBox.hgrow="ALWAYS"
                                styleClass="button-secondary">
                            <graphic>
                                <FontIcon iconLiteral="mdi2r-refresh"
                                          iconSize="16"/>
                            </graphic>
                        </Button>
                    </HBox>
                </VBox>
            </VBox>

            <!-- Leave History (Table Card) -->
            <VBox styleClass="chart-card"
                  GridPane.rowIndex="0" GridPane.columnIndex="1">

                <Label text="Leave History" styleClass="section-title">
                    <graphic>
                        <FontIcon iconLiteral="mdi2f-file-document"
                                  iconSize="18"
                                  iconColor="#7f8c8d"/>
                    </graphic>
                </Label>

                <VBox spacing="12" styleClass="vbox-padding">
                    <TableView fx:id="leaveHistoryTable" prefHeight="520">
                        <columns>
                            <TableColumn fx:id="colId" text="ID" prefWidth="60"/>
                            <TableColumn fx:id="colStart" text="Start" prefWidth="160"/>
                            <TableColumn fx:id="colEnd" text="End" prefWidth="160"/>
                            <TableColumn fx:id="colType" text="Type" prefWidth="110"/>
                            <TableColumn fx:id="colStatus" text="Status" prefWidth="110"/>
                            <TableColumn fx:id="colReason" text="Reason" prefWidth="260"/>
                        </columns>
                    </TableView>
                </VBox>
            </VBox>

        </GridPane>
    </VBox>
</ScrollPane>
